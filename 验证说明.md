# AI导航助手 - 验证说明

## 验证步骤

### 1. 环境准备验证

```bash
# 检查Python版本
python --version
# 应该显示 Python 3.8+

# 检查依赖安装
pip list | grep -E "(fastapi|uvicorn|speechrecognition|pyaudio)"
```

### 2. 配置验证

编辑 `.env` 文件，确保以下配置正确：

```env
DEEPSEEK_API_KEY=你的DeepSeek_API密钥
BAIDU_MAP_AK=你的百度地图AK
AMAP_KEY=你的高德地图Key
```

运行配置检查：
```bash
python run.py --check
```

预期输出：
```
✅ 所有依赖包已安装
✅ 配置文件验证通过
✅ DeepSeek连接正常
✅ 百度地图MCP连接正常
✅ 高德地图MCP连接正常
```

### 3. 功能验证

#### 3.1 启动应用
```bash
python run.py
```

访问 http://127.0.0.1:8000 查看Web界面

#### 3.2 文本输入测试
在Web界面输入以下测试用例：

1. **基本导航**: "从北京天安门到上海东方明珠"
   - 预期: 成功识别起点和终点，选择合适的地图服务

2. **模糊地址**: "帮我导航到最近的星巴克"
   - 预期: AI能够理解"最近"的含义，进行地址标准化

3. **交通方式指定**: "从公司到家，坐公交"
   - 预期: 识别"公交"为公共交通模式

#### 3.3 语音输入测试
1. 点击"语音输入"按钮
2. 说出导航指令，如："从北京西站到天安门"
3. 观察语音识别结果是否正确

#### 3.4 API接口测试
```bash
# 测试导航API
curl -X POST "http://127.0.0.1:8000/api/navigate" \
  -H "Content-Type: application/json" \
  -d '{"text": "从北京天安门到上海东方明珠"}'

# 测试状态API
curl "http://127.0.0.1:8000/api/status"
```

### 4. 集成测试

运行完整测试套件：
```bash
python run.py --test
```

预期输出：
```
🧪 运行测试导航...

测试 1: 从北京天安门到上海东方明珠
✅ 测试成功
   起点: 北京天安门
   终点: 上海东方明珠
   地图: baidu_map

测试 2: 帮我导航到最近的星巴克
✅ 测试成功
   起点: [当前位置]
   终点: 星巴克
   地图: amap

测试 3: 从公司到家，坐公交
✅ 测试成功
   起点: 公司
   终点: 家
   地图: baidu_map
```

## 验证标准

### 成功标准

1. **环境配置** ✅
   - Python 3.8+ 环境正常
   - 所有依赖包正确安装
   - API密钥配置完整

2. **服务连接** ✅
   - DeepSeek API连接正常
   - 至少一个地图MCP服务连接正常
   - Web服务正常启动

3. **功能正确性** ✅
   - 文本输入导航功能正常
   - 语音输入识别功能正常
   - 地址标准化功能正常
   - 地图服务选择逻辑正确

4. **用户体验** ✅
   - Web界面响应迅速
   - 错误信息清晰明确
   - 处理结果展示完整

### 故障排除

#### 常见问题及解决方案

1. **语音识别失败**
   - 检查麦克风权限
   - 确保网络连接正常
   - 验证SpeechRecognition库安装

2. **API调用失败**
   - 验证API密钥是否正确
   - 检查网络连接
   - 查看控制台错误日志

3. **地图无法打开**
   - 确保对应地图应用已安装
   - 验证MCP服务URL格式
   - 检查AK/Key权限设置

4. **地址识别错误**
   - 提供更明确的地标名称
   - 包含城市信息提高准确性
   - 使用标准地址格式

## 性能指标

### 响应时间要求
- 页面加载: < 2秒
- 导航请求处理: < 5秒
- 语音识别: < 3秒

### 成功率要求
- 地址识别成功率: > 90%
- 导航执行成功率: > 95%
- 语音识别准确率: > 85%

## 安全验证

1. **API密钥安全**
   - 确认密钥未硬编码在代码中
   - 验证.env文件权限设置
   - 确保.gitignore包含.env

2. **输入验证**
   - 测试特殊字符输入
   - 验证SQL注入防护
   - 检查XSS防护

3. **错误处理**
   - 验证异常情况下的友好提示
   - 检查日志不泄露敏感信息
   - 确认服务降级机制

## 兼容性验证

### 浏览器兼容性
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

### 操作系统兼容性
- Windows 10+
- macOS 10.15+
- Ubuntu 18.04+

## 验收清单

- [ ] 环境配置完成
- [ ] 所有API密钥正确配置
- [ ] 依赖包安装完成
- [ ] 服务连接正常
- [ ] 文本导航功能正常
- [ ] 语音输入功能正常
- [ ] Web界面正常显示
- [ ] 错误处理完善
- [ ] 性能指标达标
- [ ] 安全验证通过

完成以上所有验证后，系统即可投入生产使用。